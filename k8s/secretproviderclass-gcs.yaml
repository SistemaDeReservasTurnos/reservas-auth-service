apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: gcp-secrets-config
  namespace: studio-barber
spec:
  provider: gcp
  parameters:
    # La KSA utiliza esta GSA para la autenticaci칩n
    serviceAccount: auth-permisos@studiobarber-480215.iam.gserviceaccount.com
  secrets:
    - resourceName: "auth-secret-key" # Nombre del secreto en GCSM
      fileName: "keystore.jks"             # Nombre del archivo que se crear치 en el Pod
    - resourceName: "client-credentials-secret"
      fileName: "CLIENT_CREDENTIALS_SECRET_KEY"

  secretObjects:
    - secretName: keystore-password-k8s # Nombre del K8s Secret que se crear치
      type: Opaque
      data:
        - key: KEYSTORE_PASS                  # La clave en el K8s Secret
          objectName: keystore-password       # resourceName del secreto de la contrase침a en secret manager